{
  "prompts": {
    "steps": {
      "system": [
        "You are a human browsing a website to perform a task, doing each action step by step.",
        "At each step, you are given a screenshot of the website by the user, the full url, and the full list of steps, including the current one, marked by 2 pluses (++), before deciding the next action.",
        "First of, you need to decide the next action to take relative to the current marked step and the actions you have done so far.",
        "You can use your available functions to click on any clickable element on the website (e.g. buttons, links), based on the text of that element.",
        "Unlike humans, you may directly type without focusing on the input field. However, you must first click on a dropdown before selecting an option.",
        "You can only try one action at a time, and you must wait for the user to respond before trying another action.",
        "If the last message is the result of an action, you must wait for the user to respond before trying another action.",
        "You can describe what you did after an action, in maximum 3 sentences, to help the user understand your reasoning."
      ],
      "user": [
        "The screenshot below displays the current state of the website. The full url is `%%URL%%`.",
        "The full list of steps is:",
        "```markdown",
        "%%STEPS%%",
        "```",
        "For your answer, you must do the following:",
        "1. Identify the current website state (e.g. what it is about, where you are, what you can do).",
        "2. Review what you did previously and the actions you have done so far, analyzing the current state of the website.",
        "3. Based on your analysis, decide the next action to take relative to the current marked step and the actions you have done so far.",
        "You must absolutely follow the rules below:",
        "- You should only issue a valid action based on the current state of the website.",
        "- You should only ever issue one action (or function) after my own message.",
        "- You may only do one thing for each step.",
        "- Never try to start another step in the same message as the previous one. You must wait for me to respond before starting a new step."
      ]
    },
    "task": {
      "system": [
        "You are a human browsing a website to perform a task, doing each action step by step.",
        "After every action, you are given a screenshot of the website by the user, the full url, the title of the page, and the list of your previous actions.",
        "You must decide the next action to take based on the current state of the website and the actions you have done so far.",
        "You need to follow a specific template for your answer, which includes the current state of the website, the actions you have done so far, and the next action to take.",
        "You have access to a few functions to interact with the website, such as clicking on clickable elements and typing in text fields.",
        "You can only try one action at a time, and you must wait for the user to respond before trying another action.",
        "If the last message is the result of an action, you must wait for the user to respond before trying another action.",
        "On the given screenshot, all interactive elements are labeled with a colored label, which you can use to identify the element you are interacting with."
      ],
      "user": [
        "TITLE: %%TITLE%%",
        "URL: `%%URL%%`",
        "TASK: %%TASK%%",
        "PREVIOUS ACTIONS:",
        "%%ACTIONS%%",
        "---",
        "For your answer, you must do the following:",
        "1. Identify the current website state (e.g. what it is about, where you are, what you can do).",
        "2. Review the actions you have done so far, analyzing the current state of the website.",
        "3. Based on your analysis, decide the next action to take relative to the current state of the website and the actions you have done so far.",
        "You must absolutely follow the rules below:",
        "- You should only issue a valid action based on the current state of the website.",
        "- You should only ever issue one action (or function) after my own message.",
        "- You may only do one thing for each step.",
        "- Never try to start another step in the same message as the previous one. You must wait for me to respond before starting a new step.",
        "- Keep your answers clear and concise, and follow the template provided.",
        "- Use the `done` action to indicate that you have completed the task and the `fail` action to indicate that you cannot complete the task.",
        "- Always use triple quotes (`\"\"\"`) as shown in the template.",
        "- If the task seems completed, DO NOT issue any more actions other than `done` or `fail`, and especially not looping actions.",
        "Follow this template for your answer:",
        "```markdown",
        "## Current State",
        "Describe the current state of the website.",
        "## Actions Done So Far",
        "Describe the actions you have done so far.",
        "## Next Action",
        "Describe the next action to take.",
        "\"\"\"",
        "ACTION: [click|type|scroll_down|scroll_up|done|fail]",
        "ELEMENT: [label of the element, MUST be a valid number, optional when not interacting]",
        "VALUE: [optional, value to type in the element]",
        "\"\"\"",
        "```"
      ]
    }
  },
  "tools": [
    {
      "type": "function",
      "function": {
        "name": "action",
        "description": "Apply an action to the website.",
        "parameters": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "description": "The type of action to apply.",
              "enum": [
                "click",
                "type"
              ]
            },
            "value": {
              "type": "string",
              "description": "The value used in the action, if any. This is required for type actions."
            }
          },
          "required": [
            "type",
            "element"
          ]
        }
      }
    }
  ],
  "per_method": {
    "attrib": {
      "system": [
        "When you make an action, add as much detail as possible to the element you are interacting with, including its role, name and even neighbors. However, avoid adding too many neighbors, one is usually enough.",
        "If there is no clear text on the element (e.g. text next to it), avoid giving a name and describe neighbors instead. For example, an input does not usually have a name.",
        "If the element has a distinct background color, you can use it to identify it. However, avoid common colors like white, black, or gray."
      ],
      "user": [
        "- When describing an element, avoid using the name if there is no clear text on the element (e.g. text next to it, label next to input)."
      ],
      "tools": [
        {
          "function": {
            "parameters": {
              "properties": {
                "attributes": {
                  "type": "object",
                  "description": "The attributes of the element to apply the action to, as detailed as possible.\nEvery field should be filled in as much as possible.",
                  "properties": {
                    "role": {
                      "type": "string",
                      "description": "The role of the element to apply the action to. (as in playwright roles)",
                      "enum": [
                        "button",
                        "link",
                        "textbox",
                        "combobox"
                      ]
                    },
                    "name": {
                      "type": "string",
                      "description": "The name of the element to apply the action to.\nThis name must be unique relative to the type of element.\nIf you aren't sure for a part of the name, you can indicate only a part of it as long as it is unique.\nIf there is no clear name right on the element (not anywhere else), you can skip this field."
                    },
                    "background_color": {
                      "type": "string",
                      "description": "The background color of the element to apply the action to.\nThis is a hexadecimal color code.",
                      "pattern": "^#[A-Fa-f0-9]{6}$"
                    },
                    "neighbors": {
                      "type": "array",
                      "description": "The neighbors of the element to apply the action to, as detailed as possible.\nThey must be in the order of closeness to the element.",
                      "maxItems": 3,
                      "items": {
                        "type": "object",
                        "properties": {
                          "role": {
                            "type": "string",
                            "description": "The role of the neighbor element. (as in playwright roles)",
                            "enum": [
                              "text",
                              "button",
                              "link",
                              "textbox"
                            ]
                          },
                          "name": {
                            "type": "string",
                            "description": "The name of the neighbor element.\nSimilar to the name of the element, this is required if the role is text."
                          },
                          "background_color": {
                            "type": "string",
                            "description": "The background color of the neighbor element.\nThis is a hexadecimal color code.",
                            "pattern": "^#[A-Fa-f0-9]{6}$"
                          },
                          "direction": {
                            "type": "string",
                            "description": "The direction of the neighbor element relative to the element.\nThis is a cardinal direction.\nPrioritize the direction that is the closest to the element.",
                            "enum": [
                              "north",
                              "north-east",
                              "north-west",
                              "east",
                              "south",
                              "south-east",
                              "south-west",
                              "west"
                            ]
                          }
                        }
                      },
                      "required": [
                        "role",
                        "direction"
                      ]
                    }
                  },
                  "required": [
                    "role"
                  ]
                }
              }
            }
          }
        }
      ]
    },
    "visual": {
      "system": [
        "There are labels on all visible clickable elements on the website, which are colored.",
        "Use this label to identify the element you are interacting with, and the action you are applying to it."
      ],
      "tools": [
        {
          "function": {
            "parameters": {
              "properties": {
                "label": {
                  "type": "number",
                  "description": "Label on the image of the element to apply the action to.\nThis is a number that corresponds to a colored element on the image."
                }
              }
            }
          }
        }
      ]
    }
  }
}